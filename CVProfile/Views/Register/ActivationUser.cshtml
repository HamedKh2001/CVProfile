@model string
@{
    Layout = "_LoginLayout";
}

<div class="container-login100">
    <div class="wrap-login100">
        <div class="login100-pic js-tilt" data-tilt>
            <img src="/Login/images/img-01.png" alt="IMG">
        </div>

        <form class="login100-form validate-form" asp-controller="Register" asp-action="ActivationUser">
            <span class="login100-form-title">
                تـایـیـد نـهـایـی
            </span>

            <div class="wrap-input100 validate-input">
                <input id="password" name="password" class="input100" placeholder="کد ارسال شده">
                <span class="focus-input100"></span>
                <span class="symbol-input100">
                    <i class="fa fa-envelope" aria-hidden="true"></i>
                </span>
            </div>
            <div class="container-login100-form-btn">
                <button id="activate" type="button" class="login100-form-btn">
                    ثــبــت
                </button>
            </div>
            <div class="text-center p-t-136">
                <a class="txt2" href="#">

                    <i class="fa fa-long-arrow-right m-l-5" aria-hidden="true"></i>
                </a>
            </div>
        </form>
    </div>
</div>

@section scripts
{
    <script>
        $('#activate').click(function (e) {
            e.preventDefault();
            let pas = $('#password').val();
            let phonenumber = location.href.split('/')[4];
            console.log(phonenumber);
            $.ajax({
                type: "POST",
                url: "/Activation/" + phonenumber,
                data: "password=" + pas,
                success: function (response) {
                    if (response.status === 200) {
                        Swal.fire({
                            icon: 'success',
                            title: response.message,
                        }).then((result) => {
                            location.href = '/';
                        })
                    }
                    else {
                        Swal.fire({
                            icon: 'error',
                            title: response.message,
                        })
                    }
                }
            });
        });
    </script>
}